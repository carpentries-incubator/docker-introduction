<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Reproducible Computational Environments Using Containers: Introduction to Docker: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="manifest" href="site.webmanifest">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo.svg"><span class="badge text-bg-info">
          <abbr title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#polishing-beta-stage" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Reproducible Computational Environments Using Containers: Introduction to Docker
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Reproducible Computational Environments Using Containers: Introduction to Docker
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">Glossary</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Reproducible Computational Environments Using Containers: Introduction to Docker
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="introduction.html">1. Introducing Containers</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="meet-docker.html">2. Introducing the Docker Command Line</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="running-containers.html">3. Exploring and Running Containers</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="managing-containers.html">4. Cleaning Up Containers</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="docker-hub.html">5. Finding Containers on Docker Hub</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="creating-container-images.html">6. Creating Your Own Container Images</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="advanced-containers.html">7. Creating More Complex Container Images</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="docker-image-examples.html">8. Examples of Using Container Images in Practice</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="reproduciblity.html">9. Containers in Research Workflows: Reproducibility and Granularity</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li>
<li><a href="reference.html">Glossary</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-introduction"><p>Content from <a href="introduction.html">Introducing Containers</a></p>
<hr>
<p>Last updated on 2024-10-22 |

        <a href="https://github.com/carpentries-incubator/docker-introduction/edit/main/episodes/introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are containers, and why might they be useful to me?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Show how software depending on other software leads to configuration
management problems.</li>
<li>Identify the problems that software installation can pose for
research.</li>
<li>Explain the advantages of containerization.</li>
<li>Explain how using containers can solve software configuration
problems</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="learning-about-docker-containers" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="learning-about-docker-containers" class="callout-inner">
<h3 class="callout-title">Learning about Docker Containers</h3>
<div class="callout-content">
<p>The Australian Research Data Commons has produced a short
introductory video about Docker containers that covers many of the
points below. Watch it before or after you go through this section to
reinforce your understanding!</p>
<p><a href="https://www.youtube.com/watch?v=HelrQnm3v4g" class="external-link">How can
software containers help your research?</a></p>
<p>Australian Research Data Commons, 2021. <em>How can software
containers help your research?</em>. [video] Available at: <a href="https://www.youtube.com/watch?v=HelrQnm3v4g" class="external-link">https://www.youtube.com/watch?v=HelrQnm3v4g</a>
DOI: <a href="https://doi.org/10.5281/zenodo.5091260" class="external-link">http://doi.org/10.5281/zenodo.5091260</a></p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="scientific-software-challenges">Scientific Software Challenges<a class="anchor" aria-label="anchor" href="#scientific-software-challenges"></a>
</h2>
<hr class="half-width">
<div id="whats-your-experience" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="whats-your-experience" class="callout-inner">
<h3 class="callout-title">What’s Your Experience?</h3>
<div class="callout-content">
<p>Take a minute to think about challenges that you have experienced in
using scientific software (or software in general!) for your research.
Then, share with your neighbors and try to come up with a list of common
gripes or challenges.</p>
</div>
</div>
</div>
<div id="what-is-a-software-dependency" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="what-is-a-software-dependency" class="callout-inner">
<h3 class="callout-title">What is a software <em>dependency</em>?</h3>
<div class="callout-content">
<p>We will mention software <em>dependencies</em> a lot in this section
of the workshop so it is good to clarify this term up front. A software
dependency is a relationship between software components where one
component relies on the other to work properly. For example, if a
software application uses a library to query a database, the application
depends on that library.</p>
</div>
</div>
</div>
<p>You may have come up with some of the following:</p>
<ul>
<li>you want to use software that doesn’t exist for the operating system
(Mac, Windows, Linux) you’d prefer.</li>
<li>you struggle with installing a software tool because you have to
install a number of other dependencies first. Those dependencies, in
turn, require <em>other</em> things, and so on (i.e. combinatoric
explosion).</li>
<li>the software you’re setting up involves many dependencies and only a
subset of all possible versions of those dependencies actually works as
desired.</li>
<li>you’re not actually sure what version of the software you’re using
because the install process was so circuitous.</li>
<li>you and a colleague are using the same software but get different
results because you have installed different versions and/or are using
different operating systems.</li>
<li>you installed everything correctly on your computer but now need to
install it on a colleague’s computer/campus computing cluster/etc.</li>
<li>you’ve written a package for other people to use but a lot of your
users frequently have trouble with installation.</li>
<li>you need to reproduce a research project from a former colleague and
the software used was on a system you no longer have access to.</li>
</ul>
<p>A lot of these characteristics boil down to one fact: the main
program you want to use likely depends on many, many, different other
programs (including the operating system!), creating a very complex, and
often fragile system. One change or missing piece may stop the whole
thing from working or break something that was already running. It’s no
surprise that this situation is sometimes informally termed
<strong>dependency hell</strong>.</p>
<div id="software-and-science" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="software-and-science" class="callout-inner">
<h3 class="callout-title">Software and Science</h3>
<div class="callout-content">
<p>Again, take a minute to think about how the software challenges we’ve
discussed could impact (or have impacted!) the quality of your work.
Share your thoughts with your neighbors. What can go wrong if our
software doesn’t work?</p>
</div>
</div>
</div>
<p>Unsurprisingly, software installation and configuration challenges
can have negative consequences for research:</p>
<ul>
<li>you can’t use a specific tool at all, because it’s not available or
installable.</li>
<li>you can’t reproduce your results because you’re not sure what tools
you’re actually using.</li>
<li>you can’t access extra/newer resources because you’re not able to
replicate your software set up.</li>
<li>others cannot validate and/or build upon your work because they
cannot recreate your system’s unique configuration.</li>
</ul>
<p>Thankfully there are ways to get underneath (a lot of) this mess:
containers to the rescue! Containers provide a way to package up
software dependencies and access to resources such as files and
communications networks in a uniform manner.</p>
</section><section><h2 class="section-heading" id="what-is-a-container">What is a Container?<a class="anchor" aria-label="anchor" href="#what-is-a-container"></a>
</h2>
<hr class="half-width">
<p>Imagine you want to install some research software but don’t want to
take the chance of making a mess of your existing system by installing a
bunch of additional stuff (libraries/dependencies/etc.). You don’t want
to buy a whole new computer because it’s too expensive. What if,
instead, you could have another independent filesystem and running
operating system that you could access from your main computer, and that
is actually stored within this existing computer?</p>
<p>More concretely, Docker Inc use the following definition of a
container:</p>
<blockquote>
<p>A container is a standard unit of software that packages up code and
all its dependencies so the application runs reliably from one computing
environment to another.</p>
</blockquote>
<p><a href="https://www.docker.com/resources/what-container/" class="external-link uri">https://www.docker.com/resources/what-container/</a></p>
<p>The term container can be usefully considered with reference to
shipping containers. Before shipping containers were developed, packing
and unpacking cargo ships was time consuming and error prone, with high
potential for different clients’ goods to become mixed up. Just like
shipping containers keep things together that should stay together,
software containers standardize the description and creation of a
complete software system: you can drop a container into any computer
with the container software installed (the ‘container host’), and it
should <em>just work</em>.</p>
<div id="virtualization" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="virtualization" class="callout-inner">
<h3 class="callout-title">Virtualization</h3>
<div class="callout-content">
<p>Containers are an example of what’s called
<strong>virtualization</strong> – having a second virtual computer
running and accessible from a main or <strong>host</strong> computer.
Another example of virtualization are <strong>virtual machines</strong>
or VMs. A virtual machine typically contains a whole copy of an
operating system in addition to its own filesystem and has to get booted
up in the same way a computer would. A container is considered a
lightweight version of a virtual machine; underneath, the container is
(usually) using the Linux kernel and simply has some flavour of Linux +
the filesystem inside.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="what-is-docker">What is Docker?<a class="anchor" aria-label="anchor" href="#what-is-docker"></a>
</h2>
<hr class="half-width">
<p><a href="https://www.docker.com/" class="external-link">Docker</a> is a tool that allows
you to build and run containers. It’s not the only tool that can create
containers, but is the one we’ve chosen for this workshop.</p>
</section><section><h2 class="section-heading" id="container-images">Container Images<a class="anchor" aria-label="anchor" href="#container-images"></a>
</h2>
<hr class="half-width">
<p>One final term: while the <strong>container</strong> is an
alternative filesystem layer that you can access and run from your
computer, the <strong>container image</strong> is the ‘recipe’ or
template for a container. The container image has all the required
information to start up a running copy of the container. A running
container tends to be transient and can be started and shut down. The
container image is more long-lived, as a definition for the container.
You could think of the container image like a cookie cutter – it can be
used to create multiple copies of the same shape (or container) and is
relatively unchanging, where cookies come and go. If you want a
different type of container (cookie) you need a different container
image (cookie cutter).</p>
<figure><img src="fig/containers-cookie-cutter.png" alt="An image comparing using a cookie cutter to the container workflow" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="putting-the-pieces-together">Putting the Pieces Together<a class="anchor" aria-label="anchor" href="#putting-the-pieces-together"></a>
</h2>
<hr class="half-width">
<p>Think back to some of the challenges we described at the beginning.
The many layers of scientific software installations make it hard to
install and re-install scientific software – which ultimately, hinders
reliability and reproducibility.</p>
<p>But now, think about what a container is – a self-contained,
complete, separate computer filesystem. What advantages are there if you
put your scientific software tools into containers?</p>
<p>This solves several of our problems:</p>
<ul>
<li>documentation – there is a clear record of what software and
software dependencies were used, from bottom to top.</li>
<li>portability – the container can be used on any computer that has
Docker installed – it doesn’t matter whether the computer is Mac,
Windows or Linux-based.</li>
<li>reproducibility – you can use the exact same software and
environment on your computer and on other resources (like a large-scale
computing cluster).</li>
<li>configurability – containers can be sized to take advantage of more
resources (memory, CPU, etc.) on large systems (clusters) or less,
depending on the circumstances.</li>
</ul>
<p>The rest of this workshop will show you how to download and run
containers from pre-existing container images on your own computer, and
how to create and share your own container images.</p>
</section><section><h2 class="section-heading" id="use-cases-for-containers">Use cases for containers<a class="anchor" aria-label="anchor" href="#use-cases-for-containers"></a>
</h2>
<hr class="half-width">
<p>Now that we have discussed a little bit about containers – what they
do and the issues they attempt to address – you may be able to think of
a few potential use cases in your area of work. Some examples of common
use cases for containers in a research context include:</p>
<ul>
<li>Using containers solely on your own computer to use a specific
software tool or to test out a tool (possibly to avoid a difficult and
complex installation process, to save your time or to avoid dependency
hell).</li>
<li>Creating a <code>Dockerfile</code> that generates a container image
with software that you specify installed, then sharing a container image
generated using this Dockerfile with your collaborators for use on their
computers or a remote computing resource (e.g. cloud-based or HPC
system).</li>
<li>Archiving the container images so you can repeat analysis/modelling
using the same software and configuration in the future – capturing your
workflow.</li>
</ul>
<!--  LocalWords:  keypoints links.md endcomment
 --><div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Almost all software depends on other software components to
function, but these components have independent evolutionary paths.</li>
<li>Small environments that contain only the software that is needed for
a given task are easier to replicate and maintain.</li>
<li>Critical systems that cannot be upgraded, due to cost, difficulty,
etc. need to be reproduced on newer systems in a maintainable and
self-documented way.</li>
<li>Virtualization allows multiple environments to run on a single
computer.</li>
<li>Containerization improves upon the virtualization of whole computers
by allowing efficient management of the host computer’s memory and
storage resources.</li>
<li>Containers are built from ‘recipes’ that define the required set of
software components and the instructions necessary to build/install them
within a container image.</li>
<li>Docker is just one software platform that can create containers and
the resources they use.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-meet-docker"><p>Content from <a href="meet-docker.html">Introducing the Docker Command Line</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/carpentries-incubator/docker-introduction/edit/main/episodes/meet-docker.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I know Docker is installed and running?</li>
<li>How do I interact with Docker?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to check that Docker is installed and is ready to
use.</li>
<li>Demonstrate some initial Docker command line interactions.</li>
<li>Use the built-in help for Docker commands.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="docker-command-line">Docker command line<a class="anchor" aria-label="anchor" href="#docker-command-line"></a>
</h2>
<hr class="half-width">
<p>Start the Docker application that you installed in working through
the setup instructions for this session. Note that this might not be
necessary if your laptop is running Linux or if the installation added
the Docker application to your startup process.</p>
<div id="you-may-need-to-login-to-docker-hub" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="you-may-need-to-login-to-docker-hub" class="callout-inner">
<h3 class="callout-title">You may need to login to Docker Hub</h3>
<div class="callout-content">
<p>The Docker application will usually provide a way for you to log in
to the Docker Hub using the application’s menu (macOS) or systray icon
(Windows) and it is usually convenient to do this when the application
starts. This will require you to use your Docker Hub username and your
password. We will not actually require access to the Docker Hub until
later in the course but if you can login now, you should do so.</p>
</div>
</div>
</div>
<div id="determining-your-docker-hub-username" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="determining-your-docker-hub-username" class="callout-inner">
<h3 class="callout-title">Determining your Docker Hub username</h3>
<div class="callout-content">
<p>If you no longer recall your Docker Hub username, e.g., because you
have been logging into the Docker Hub using your email address, you can
find out what it is through the steps:</p>
<ul>
<li>Open <a href="https://hub.docker.com/" class="external-link">https://hub.docker.com/</a>
in a web browser window</li>
<li>Sign-in using your email and password (don’t tell us what it
is)</li>
<li>In the top-right of the screen you will see your username</li>
</ul>
</div>
</div>
</div>
<p>Once your Docker application is running, open a shell (terminal)
window, and run the following command to check that Docker is installed
and the command line tools are working correctly. Below is the output
for a Mac version, but the specific version is unlikely to matter much:
it does not have to precisely match the one listed below.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> docker <span class="at">--version</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Docker version 20.10.5, build 55c4c88</code></pre>
</div>
<p>The above command has not actually relied on the part of Docker that
runs containers, just that Docker is installed and you can access it
correctly from the command line.</p>
<p>A command that checks that Docker is working correctly is the
<code>docker container ls</code> command (we cover this command in more
detail later in the course).</p>
<p>Without explaining the details, output on a newly installed system
would likely be:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> docker container ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</code></pre>
</div>
<p>(The command <code>docker system info</code> could also be used to
verify that Docker is correctly installed and operational but it
produces a larger amount of output.)</p>
<p>However, if you instead get a message similar to the following</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?</code></pre>
</div>
<p>then you need to check that you have started the Docker Desktop,
Docker Engine, or however else you worked through the setup
instructions.</p>
</section><section><h2 class="section-heading" id="getting-help">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<hr class="half-width">
<p>Often when working with a new command line tool, we need to get help.
These tools often have some sort of subcommand or flag (usually
<code>help</code>, <code>-h</code>, or <code>--help</code>) that
displays a prompt describing how to use the tool. For Docker, it’s no
different. If we run <code>docker --help</code>, we see the following
output (running <code>docker</code> also produces the help message):</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Usage:  docker [OPTIONS] COMMAND

A self-sufficient runtime for containers

Options:
      --config string      Location of client config files (default "/Users/vini/.docker")
  -c, --context string     Name of the context to use to connect to the daemon (overrides DOCKER_HOST env var and default context set with "docker context use")
  -D, --debug              Enable debug mode
  -H, --host list          Daemon socket(s) to connect to
  -l, --log-level string   Set the logging level ("debug"|"info"|"warn"|"error"|"fatal") (default "info")
      --tls                Use TLS; implied by --tlsverify
      --tlscacert string   Trust certs signed only by this CA (default "/Users/vini/.docker/ca.pem")
      --tlscert string     Path to TLS certificate file (default "/Users/vini/.docker/cert.pem")
      --tlskey string      Path to TLS key file (default "/Users/vini/.docker/key.pem")
      --tlsverify          Use TLS and verify the remote
  -v, --version            Print version information and quit

Management Commands:
  app*        Docker App (Docker Inc., v0.9.1-beta3)
  builder     Manage builds
  buildx*     Build with BuildKit (Docker Inc., v0.5.1-docker)
  config      Manage Docker configs
  container   Manage containers
  context     Manage contexts
  image       Manage images
  manifest    Manage Docker image manifests and manifest lists
  network     Manage networks
  node        Manage Swarm nodes
  plugin      Manage plugins
  scan*       Docker Scan (Docker Inc., v0.6.0)
  secret      Manage Docker secrets
  service     Manage services
  stack       Manage Docker stacks
  swarm       Manage Swarm
  system      Manage Docker
  trust       Manage trust on Docker images
  volume      Manage volumes

Commands:
  attach      Attach local standard input, output, and error streams to a running container
  build       Build an image from a Dockerfile
  commit      Create a new image from a container's changes
  cp          Copy files/folders between a container and the local filesystem
  create      Create a new container
  diff        Inspect changes to files or directories on a container's filesystem
  events      Get real time events from the server
  exec        Run a command in a running container
  export      Export a container's filesystem as a tar archive
  history     Show the history of an image
  images      List images
  import      Import the contents from a tarball to create a filesystem image
  info        Display system-wide information
  inspect     Return low-level information on Docker objects
  kill        Kill one or more running containers
  load        Load an image from a tar archive or STDIN
  login       Log in to a Docker registry
  logout      Log out from a Docker registry
  logs        Fetch the logs of a container
  pause       Pause all processes within one or more containers
  port        List port mappings or a specific mapping for the container
  ps          List containers
  pull        Pull an image or a repository from a registry
  push        Push an image or a repository to a registry
  rename      Rename a container
  restart     Restart one or more containers
  rm          Remove one or more containers
  rmi         Remove one or more images
  run         Run a command in a new container
  save        Save one or more images to a tar archive (streamed to STDOUT by default)
  search      Search the Docker Hub for images
  start       Start one or more stopped containers
  stats       Display a live stream of container(s) resource usage statistics
  stop        Stop one or more running containers
  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE
  top         Display the running processes of a container
  unpause     Unpause all processes within one or more containers
  update      Update configuration of one or more containers
  version     Show the Docker version information
  wait        Block until one or more containers stop, then print their exit codes

Run 'docker COMMAND --help' for more information on a command.</code></pre>
</div>
<p>There is a list of commands and the end of the help message says:
<code>Run 'docker COMMAND --help' for more information on a command.</code>
For example, take the <code>docker container ls</code> command that we
ran previously. We can see from the Docker help prompt that
<code>container</code> is a Docker command, so to get help for that
command, we run:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">docker</span> container <span class="at">--help</span>  <span class="co"># or instead 'docker container'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Usage:  docker container COMMAND

Manage containers

Commands:
  attach      Attach local standard input, output, and error streams to a running container
  commit      Create a new image from a container's changes
  cp          Copy files/folders between a container and the local filesystem
  create      Create a new container
  diff        Inspect changes to files or directories on a container's filesystem
  exec        Run a command in a running container
  export      Export a container's filesystem as a tar archive
  inspect     Display detailed information on one or more containers
  kill        Kill one or more running containers
  logs        Fetch the logs of a container
  ls          List containers
  pause       Pause all processes within one or more containers
  port        List port mappings or a specific mapping for the container
  prune       Remove all stopped containers
  rename      Rename a container
  restart     Restart one or more containers
  rm          Remove one or more containers
  run         Run a command in a new container
  start       Start one or more stopped containers
  stats       Display a live stream of container(s) resource usage statistics
  stop        Stop one or more running containers
  top         Display the running processes of a container
  unpause     Unpause all processes within one or more containers
  update      Update configuration of one or more containers
  wait        Block until one or more containers stop, then print their exit codes

Run 'docker container COMMAND --help' for more information on a command.</code></pre>
</div>
<p>There’s also help for the <code>container ls</code> command:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">docker</span> container ls <span class="at">--help</span>  <span class="co"># this one actually requires the '--help' flag</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Usage:  docker container ls [OPTIONS]

List containers

Aliases:
  ls, ps, list

Options:
  -a, --all             Show all containers (default shows just running)
  -f, --filter filter   Filter output based on conditions provided
      --format string   Pretty-print containers using a Go template
  -n, --last int        Show n last created containers (includes all states) (default -1)
  -l, --latest          Show the latest created container (includes all states)
      --no-trunc        Don't truncate output
  -q, --quiet           Only display container IDs
  -s, --size            Display total file sizes</code></pre>
</div>
<p>You may notice that there are many commands that stem from the
<code>docker</code> command. Instead of trying to remember all possible
commands and options, it’s better to learn how to effectively get help
from the command line. Although we can always search the web, getting
the built-in help from our tool is often much faster and may provide the
answer right away. This applies not only to Docker, but also to most
command line-based tools.</p>
<div id="docker-command-line-interface-cli-syntax" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="docker-command-line-interface-cli-syntax" class="callout-inner">
<h3 class="callout-title">Docker Command Line Interface (CLI) syntax</h3>
<div class="callout-content">
<p>In this lesson we use the newest Docker CLI syntax <a href="https://www.docker.com/blog/whats-new-in-docker-1-13/" class="external-link">introduced
with the Docker Engine version 1.13</a>. This new syntax combines
commands into groups you will most often want to interact with. In the
help example above you can see <code>image</code> and
<code>container</code> management commands, which can be used to
interact with your images and containers respectively. With this new
syntax you issue commands using the following pattern
<code>docker [command] [subcommand] [additional options]</code></p>
<p>Comparing the output of two help commands above, you can see that the
same thing can be achieved in multiple ways. For example to start a
Docker container using the old syntax you would use
<code>docker run</code>. To achieve the same with the new syntax, you
use <code>docker container run</code> instead. Even though the old
approach is shorter and still officially supported, the new syntax is
more descriptive, less error-prone and is therefore recommended.</p>
</div>
</div>
</div>
<div id="exploring-a-command" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exploring-a-command" class="callout-inner">
<h3 class="callout-title">Exploring a command</h3>
<div class="callout-content">
<p>Run <code>docker --help</code> and pick a command from the list.
Explore the help prompt for that command. Try to guess how a command
would work by looking at the <code>Usage:</code> section of the
prompt.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Suppose we pick the <code>docker image build</code> command:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">docker</span> image build <span class="at">--help</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Usage:  docker image build [OPTIONS] PATH | URL | -

Build an image from a Dockerfile

Options:
     --add-host list           Add a custom host-to-IP mapping (host:ip)
     --build-arg list          Set build-time variables
     --cache-from strings      Images to consider as cache sources
     --cgroup-parent string    Optional parent cgroup for the container
     --compress                Compress the build context using gzip
     --cpu-period int          Limit the CPU CFS (Completely Fair Scheduler) period
     --cpu-quota int           Limit the CPU CFS (Completely Fair Scheduler) quota
 -c, --cpu-shares int          CPU shares (relative weight)
     --cpuset-cpus string      CPUs in which to allow execution (0-3, 0,1)
     --cpuset-mems string      MEMs in which to allow execution (0-3, 0,1)
     --disable-content-trust   Skip image verification (default true)
 -f, --file string             Name of the Dockerfile (Default is 'PATH/Dockerfile')
     --force-rm                Always remove intermediate containers
     --iidfile string          Write the image ID to the file
     --isolation string        Container isolation technology
     --label list              Set metadata for an image
 -m, --memory bytes            Memory limit
     --memory-swap bytes       Swap limit equal to memory plus swap: '-1' to enable unlimited swap
     --network string          Set the networking mode for the RUN instructions during build (default "default")
     --no-cache                Do not use cache when building the image
     --pull                    Always attempt to pull a newer version of the image
 -q, --quiet                   Suppress the build output and print image ID on success
     --rm                      Remove intermediate containers after a successful build (default true)
     --security-opt strings    Security options
     --shm-size bytes          Size of /dev/shm
 -t, --tag list                Name and optionally a tag in the 'name:tag' format
     --target string           Set the target build stage to build.
     --ulimit ulimit           Ulimit options (default [])</code></pre>
</div>
<p>We could try to guess that the command could be run like this:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">docker</span> image build .</span></code></pre>
</div>
<p>or</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">docker</span> image build https://github.com/docker/rootfs.git</span></code></pre>
</div>
<p>Where <code>https://github.com/docker/rootfs.git</code> could be any
relevant URL that supports a Docker image.</p>
</div>
</div>
</div>
</div>
<!--  LocalWords:  keypoints links.md endcomment systray
 -->
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>A toolbar icon indicates that Docker is ready to use (on Windows and
macOS).</li>
<li>You will typically interact with Docker using the command line.</li>
<li>To learn how to run a certain Docker command, we can type the
command followed by the <code>--help</code> flag.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-running-containers"><p>Content from <a href="running-containers.html">Exploring and Running Containers</a></p>
<hr>
<p>Last updated on 2024-06-27 |

        <a href="https://github.com/carpentries-incubator/docker-introduction/edit/main/episodes/running-containers.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I interact with Docker containers and container images on my
computer?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use the correct command to see which Docker container images are on
your computer.</li>
<li>Be able to download new Docker container images.</li>
<li>Demonstrate how to start an instance of a container from a container
image.</li>
<li>Describe at least two ways to execute commands inside a running
Docker container.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="reminder-of-terminology-container-images-and-containers" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="reminder-of-terminology-container-images-and-containers" class="callout-inner">
<h3 class="callout-title">Reminder of terminology: container images and containers</h3>
<div class="callout-content">
<p>Recall that a <em>container image</em> is the template from which
particular instances of <em>containers</em> will be created.</p>
</div>
</div>
</div>
<p>Let’s explore our first Docker container. The Docker team provides a
simple container image online called <code>hello-world</code>. We’ll
start with that one.</p>
<section><h2 class="section-heading" id="downloading-docker-images">Downloading Docker images<a class="anchor" aria-label="anchor" href="#downloading-docker-images"></a>
</h2>
<hr class="half-width">
<p>The <code>docker image</code> command is used to interact with Docker
container images. You can find out what container images you have on
your computer by using the following command (“ls” is short for
“list”):</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> docker image ls</span></code></pre>
</div>
<p>If you’ve just installed Docker, you won’t see any container images
listed.</p>
<p>To get a copy of the <code>hello-world</code> Docker container image
from the internet, run this command:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> docker image pull hello-world</span></code></pre>
</div>
<p>You should see output like this:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Using default tag: latest
latest: Pulling from library/hello-world
1b930d010525: Pull complete
Digest: sha256:f9dfddf63636d84ef479d645ab5885156ae030f611a56f3a7ac7f2fdd86d7e4e
Status: Downloaded newer image for hello-world:latest
docker.io/library/hello-world:latest</code></pre>
</div>
<div id="docker-hub" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="docker-hub" class="callout-inner">
<h3 class="callout-title">Docker Hub</h3>
<div class="callout-content">
<p>Where did the <code>hello-world</code> container image come from? It
came from the Docker Hub website, which is a place to share Docker
container images with other people. More on that in a later episode.</p>
</div>
</div>
</div>
<div id="exercise-check-on-your-images" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-check-on-your-images" class="callout-inner">
<h3 class="callout-title">Exercise: Check on Your Images</h3>
<div class="callout-content">
<p>What command would you use to see if the <code>hello-world</code>
Docker container image had downloaded successfully and was on your
computer? Give it a try before checking the solution.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>To see if the <code>hello-world</code> container image is now on your
computer, run:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> docker image ls</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Note that the downloaded <code>hello-world</code> container image is
not in the folder where you are in the terminal! (Run <code>ls</code> by
itself to check.) The container image is not a file like our normal
programs and documents; Docker stores it in a specific location that
isn’t commonly accessed, so it’s necessary to use the special
<code>docker image</code> command to see what Docker container images
you have on your computer.</p>
</section><section><h2 class="section-heading" id="running-the-hello-world-container">Running the <code>hello-world</code> container<a class="anchor" aria-label="anchor" href="#running-the-hello-world-container"></a>
</h2>
<hr class="half-width">
<p>To create and run containers from named Docker container images you
use the <code>docker container run</code> command. Try the following
<code>docker container run</code> invocation. Note that it does not
matter what your current working directory is.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> docker container run hello-world</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/</code></pre>
</div>
<p>What just happened? When we use the <code>docker container run</code>
command, Docker does three things:</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="36%">
<col width="30%">
</colgroup>
<thead><tr class="header">
<th>1. Starts a Running Container</th>
<th>2. Performs Default Action</th>
<th>3. Shuts Down the Container</th>
</tr></thead>
<tbody><tr class="odd">
<td>Starts a running container, based on the container image. Think of
this as the “alive” or “inflated” version of the container – it’s
actually doing something.</td>
<td>If the container has a default action set, it will perform that
default action. This could be as simple as printing a message (as above)
or running a whole analysis pipeline!</td>
<td>Once the default action is complete, the container stops running (or
exits). The container image is still there, but nothing is actively
running.</td>
</tr></tbody>
</table>
<p>The <code>hello-world</code> container is set up to run an action by
default – namely to print this message.</p>
<div id="using-docker-container-run-to-get-the-image" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="using-docker-container-run-to-get-the-image" class="callout-inner">
<h3 class="callout-title">Using <code>docker container run</code> to get
the image</h3>
<div class="callout-content">
<p>We could have skipped the <code>docker image pull</code> step; if you
use the <code>docker container run</code> command and you don’t already
have a copy of the Docker container image, Docker will automatically
pull the container image first and then run it.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="running-a-container-with-a-chosen-command">Running a container with a chosen command<a class="anchor" aria-label="anchor" href="#running-a-container-with-a-chosen-command"></a>
</h2>
<hr class="half-width">
<p>But what if we wanted to do something different with the container?
The output just gave us a suggestion of what to do – let’s use a
different Docker container image to explore what else we can do with the
<code>docker container run</code> command. The suggestion above is to
use <code>ubuntu</code>, but we’re going to run a different type of
Linux, <code>alpine</code> instead because it’s quicker to download.</p>
<div id="run-the-alpine-docker-container" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="run-the-alpine-docker-container" class="callout-inner">
<h3 class="callout-title">Run the Alpine Docker container</h3>
<div class="callout-content">
<p>Try downloading the <code>alpine</code> container image and using it
to run a container. You can do it in two steps, or one. What are
they?</p>
</div>
</div>
</div>
<p>What happened when you ran the Alpine Docker container?</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> docker container run alpine</span></code></pre>
</div>
<p>If you have never used the <code>alpine</code> Docker container image
on your computer, Docker probably printed a message that it couldn’t
find the container image and had to download it. If you used the
<code>alpine</code> container image before, the command will probably
show no output. That’s because this particular container is designed for
you to provide commands yourself. Try running this instead:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> docker container run alpine cat /etc/os-release</span></code></pre>
</div>
<p>You should see the output of the <code>cat /etc/os-release</code>
command, which prints out the version of Alpine Linux that this
container is using and a few additional bits of information.</p>
<div id="hello-world-part-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="hello-world-part-2" class="callout-inner">
<h3 class="callout-title">Hello World, Part 2</h3>
<div class="callout-content">
<p>Can you run a copy of the <code>alpine</code> container and make it
print a “hello world” message?</p>
<p>Give it a try before checking the solution.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Use the same command as above, but with the <code>echo</code> command
to print a message.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> docker container run alpine echo <span class="st">'Hello World'</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>So here, we see another option – we can provide commands at the end
of the <code>docker container run</code> command and they will execute
inside the running container.</p>
</section><section><h2 class="section-heading" id="running-containers-interactively">Running containers interactively<a class="anchor" aria-label="anchor" href="#running-containers-interactively"></a>
</h2>
<hr class="half-width">
<p>In all the examples above, Docker has started the container, run a
command, and then immediately stopped the container. But what if we
wanted to keep the container running so we could log into it and test
drive more commands? The way to do this is by adding the interactive
flags <code>-i</code> and <code>-t</code> (usually combined as
<code>-it</code>) to the <code>docker container run</code> command and
provide a shell (<code>bash</code>,<code>sh</code>, etc.) as our
command. The <code>alpine</code> Docker container image doesn’t include
<code>bash</code> so we need to use <code>sh</code>.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">-it</span> alpine sh</span></code></pre>
</div>
<div id="technically" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="technically" class="callout-inner">
<h3 class="callout-title">Technically…</h3>
<div class="callout-content">
<p>Technically, the interactive flag is just <code>-i</code> – the extra
<code>-t</code> (combined as <code>-it</code> above) is the “pseudo-TTY”
option, a fancy term that means a text interface. This allows you to
connect to a shell, like <code>sh</code>, using a command line. Since
you usually want to have a command line when running interactively, it
makes sense to use the two together.</p>
</div>
</div>
</div>
<p>Your prompt should change significantly to look like this:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">/</span> <span class="co">#</span></span></code></pre>
</div>
<p>That’s because you’re now inside the running container! Try these
commands:</p>
<ul>
<li><code>pwd</code></li>
<li><code>ls</code></li>
<li><code>whoami</code></li>
<li><code>echo $PATH</code></li>
<li><code>cat /etc/os-release</code></li>
</ul>
<p>All of these are being run from inside the running container, so
you’ll get information about the container itself, instead of your
computer. To finish using the container, type <code>exit</code>.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">/</span> <span class="co"># exit</span></span></code></pre>
</div>
<div id="practice-makes-perfect" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="practice-makes-perfect" class="callout-inner">
<h3 class="callout-title">Practice Makes Perfect</h3>
<div class="callout-content">
<p>Can you find out the version of Ubuntu installed on the
<code>ubuntu</code> container image? (Hint: You can use the same command
as used to find the version of alpine.)</p>
<p>Can you also find the <code>apt-get</code> program? What does it do?
(Hint: try passing <code>--help</code> to almost any command will give
you more information.)</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Solution 1 – Interactive </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Run an interactive ubuntu container – you can use
<code>docker image pull</code> first, or just run it with this
command:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">-it</span> ubuntu sh</span></code></pre>
</div>
<p>OR you can get the bash shell instead</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">-it</span> ubuntu bash</span></code></pre>
</div>
<p>Then try, running these commands</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">/#</span> cat /etc/os-release</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="ex">/#</span> apt-get <span class="at">--help</span></span></code></pre>
</div>
<p>Exit when you’re done.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">/#</span> exit</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Solution 2 – Run commands </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Run a ubuntu container, first with a command to read out the Linux
version:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> docker container run ubuntu cat /etc/os-release</span></code></pre>
</div>
<p>Then run a container with a command to print out the apt-get
help:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> docker container run ubuntu apt-get <span class="at">--help</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="even-more-options" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="even-more-options" class="callout-inner">
<h3 class="callout-title">Even More Options</h3>
<div class="callout-content">
<p>There are many more options, besides <code>-it</code> that can be
used with the <code>docker container run</code> command! A few of them
will be covered in <a href="/advanced-containers">later episodes</a> and
we’ll share two more common ones here:</p>
<ul>
<li><p><code>--rm</code>: this option guarantees that any running
container is completely removed from your computer after the container
is stopped. Without this option, Docker actually keeps the “stopped”
container around, which you’ll see in a later episode. Note that this
option doesn’t impact the <em>container images</em> that you’ve pulled,
just running instances of containers.</p></li>
<li><p><code>--name=</code>: By default, Docker assigns a random name
and ID number to each container instance that you run on your computer.
If you want to be able to more easily refer to a specific running
container, you can assign it a name using this option.</p></li>
</ul>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<hr class="half-width">
<p>So far, we’ve seen how to download Docker container images, use them
to run commands inside running containers, and even how to explore a
running container from the inside. Next, we’ll take a closer look at all
the different kinds of Docker container images that are out there.</p>
<!--  LocalWords:  keypoints amd64 fce289e99eb9 zen_dubinsky links.md
 -->
<!--  LocalWords:  eager_engelbart endcomment
 -->
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>The <code>docker image pull</code> command downloads Docker
container images from the internet.</li>
<li>The <code>docker image ls</code> command lists Docker container
images that are (now) on your computer.</li>
<li>The <code>docker container run</code> command creates running
containers from container images and can run commands inside them.</li>
<li>When using the <code>docker container run</code> command, a
container can run a default action (if it has one), a user specified
action, or a shell to be used interactively.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-managing-containers"><p>Content from <a href="managing-containers.html">Cleaning Up Containers</a></p>
<hr>
<p>Last updated on 2024-06-27 |

        <a href="https://github.com/carpentries-incubator/docker-introduction/edit/main/episodes/managing-containers.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I interact with a Docker container on my computer?</li>
<li>How do I manage my containers and container images?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to list running and completed containers.</li>
<li>Know how to list and remove container images.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="removing-images">Removing images<a class="anchor" aria-label="anchor" href="#removing-images"></a>
</h2>
<hr class="half-width">
<p>The container images and their corresponding containers can start to
take up a lot of disk space if you don’t clean them up occasionally, so
it’s a good idea to periodically remove containers and container images
that you won’t be using anymore.</p>
<p>In order to remove a specific container image, you need to find out
details about the container image, specifically, the “Image ID”. For
example, say my laptop contained the following container image:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> docker image ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>REPOSITORY       TAG         IMAGE ID       CREATED          SIZE
hello-world      latest      fce289e99eb9   15 months ago    1.84kB</code></pre>
</div>
<p>You can remove the container image with a
<code>docker image rm</code> command that includes the <em>Image
ID</em>, such as:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> docker image rm fce289e99eb9</span></code></pre>
</div>
<p>or use the container image name, like so:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> docker image rm hello-world</span></code></pre>
</div>
<p>However, you may see this output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Error response from daemon: conflict: unable to remove repository reference "hello-world" (must force) - container e7d3b76b00f4 is using its referenced image fce289e99eb9</code></pre>
</div>
<p>This happens when Docker hasn’t cleaned up some of the previously
running containers based on this container image. So, before removing
the container image, we need to be able to see what containers are
currently running, or have been run recently, and how to remove
these.</p>
</section><section><h2 class="section-heading" id="what-containers-are-running">What containers are running?<a class="anchor" aria-label="anchor" href="#what-containers-are-running"></a>
</h2>
<hr class="half-width">
<p>Working with containers, we are going to shift back to the command:
<code>docker container</code>. Similar to <code>docker image</code>, we
can list running containers by typing:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> docker container ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</code></pre>
</div>
<p>Notice that this command didn’t return any containers because our
containers all exited and thus stopped running after they completed
their work.</p>
<div id="docker-ps" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="docker-ps" class="callout-inner">
<h3 class="callout-title"><code>docker ps</code></h3>
<div class="callout-content">
<p>The command <code>docker ps</code> serves the same purpose as
<code>docker container ls</code>, and comes from the Unix shell command
<code>ps</code> which describes running processes.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="what-containers-have-run-recently">What containers have run recently?<a class="anchor" aria-label="anchor" href="#what-containers-have-run-recently"></a>
</h2>
<hr class="half-width">
<p>There is also a way to list running containers, and those that have
completed recently, which is to add the
<code>--all</code>/<code>-a</code> flag to the
<code>docker container ls</code> command as shown below.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> docker container ls <span class="at">--all</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES
9c698655416a        hello-world         "/hello"            2 minutes ago       Exited (0) 2 minutes ago                       zen_dubinsky
6dd822cf6ca9        hello-world         "/hello"            3 minutes ago       Exited (0) 3 minutes ago                       eager_engelbart</code></pre>
</div>
<div id="keeping-it-clean" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="keeping-it-clean" class="callout-inner">
<h3 class="callout-title">Keeping it clean</h3>
<div class="callout-content">
<p>You might be surprised at the number of containers Docker is still
keeping track of. One way to prevent this from happening is to add the
<code>--rm</code> flag to <code>docker container run</code>. This will
completely wipe out the record of the run container when it exits. If
you need a reference to the running container for any reason,
<strong>don’t</strong> use this flag.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="how-do-i-remove-an-exited-container">How do I remove an exited container?<a class="anchor" aria-label="anchor" href="#how-do-i-remove-an-exited-container"></a>
</h2>
<hr class="half-width">
<p>To delete an exited container you can run the following command,
inserting the <code>CONTAINER ID</code> for the container you wish to
remove. It will repeat the <code>CONTAINER ID</code> back to you, if
successful.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> docker container rm 9c698655416a</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>9c698655416a</code></pre>
</div>
<p>An alternative option for deleting exited containers is the
<code>docker container prune</code> command. Note that this command
doesn’t accept a container ID as an option because it deletes ALL exited
containers! <strong>Be careful</strong> with this command as deleting
the container is <strong>forever</strong>. <strong>Once a container is
deleted you can not get it back.</strong> If you have containers you may
want to reconnect to, you should <strong>not</strong> use this command.
It will ask you if to confirm you want to remove these containers, see
output below. If successful it will print the full
<code>CONTAINER ID</code> back to you for each container it has
removed.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> docker container prune</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>WARNING! This will remove all stopped containers.
Are you sure you want to continue? [y/N] y
Deleted Containers:
9c698655416a848278d16bb1352b97e72b7ea85884bff8f106877afe0210acfc
6dd822cf6ca92f3040eaecbd26ad2af63595f30bb7e7a20eacf4554f6ccc9b2b</code></pre>
</div>
</section><section><h2 class="section-heading" id="removing-images-for-real-this-time">Removing images, for real this time<a class="anchor" aria-label="anchor" href="#removing-images-for-real-this-time"></a>
</h2>
<hr class="half-width">
<p>Now that we’ve removed any potentially running or stopped containers,
we can try again to delete the <code>hello-world</code>
<strong>container image</strong>.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> docker image rm hello-world</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Untagged: hello-world:latest
Untagged: hello-world@sha256:5f179596a7335398b805f036f7e8561b6f0e32cd30a32f5e19d17a3cda6cc33d
Deleted: sha256:fce289e99eb9bca977dae136fbe2a82b6b7d4c372474c9235adc1741675f587e
Deleted: sha256:af0b15c8625bb1938f1d7b17081031f649fd14e6b233688eea3c5483994a66a3</code></pre>
</div>
<p>The reason that there are a few lines of output, is that a given
container image may have been formed by merging multiple underlying
layers. Any layers that are used by multiple Docker container images
will only be stored once. Now the result of <code>docker image ls</code>
should no longer include the <code>hello-world</code> container
image.</p>
<!--  LocalWords:  keypoints amd64 fce289e99eb9 zen_dubinsky links.md
 -->
<!--  LocalWords:  eager_engelbart endcomment
 -->
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>docker container</code> has subcommands used to interact and
manage containers.</li>
<li>
<code>docker image</code> has subcommands used to interact and
manage container images.</li>
<li>
<code>docker container ls</code> or <code>docker ps</code> can
provide information on currently running containers.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-docker-hub"><p>Content from <a href="docker-hub.html">Finding Containers on Docker Hub</a></p>
<hr>
<p>Last updated on 2024-10-22 |

        <a href="https://github.com/carpentries-incubator/docker-introduction/edit/main/episodes/docker-hub.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is the Docker Hub, and why is it useful?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand the importance of container registries such as Docker
Hub, quay.io, etc.</li>
<li>Explore the Docker Hub webpage for a popular Docker container
image.</li>
<li>Find the list of tags for a particular Docker container image.</li>
<li>Identify the three components of a container image’s
identifier.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In the previous episode, we ran a few different containers derived
from different container images: <code>hello-world</code>,
<code>alpine</code>, and maybe <code>ubuntu</code>. Where did these
container images come from? The Docker Hub!</p>
<section><h2 class="section-heading" id="introducing-the-docker-hub">Introducing the Docker Hub<a class="anchor" aria-label="anchor" href="#introducing-the-docker-hub"></a>
</h2>
<hr class="half-width">
<p>The Docker Hub is an online repository of container images, a vast
number of which are publicly available. A large number of the container
images are curated by the developers of the software that they package.
Also, many commonly used pieces of software that have been containerized
into images are officially endorsed, which means that you can trust the
container images to have been checked for functionality, stability, and
that they don’t contain malware.</p>
<div id="docker-can-be-used-without-connecting-to-the-docker-hub" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="docker-can-be-used-without-connecting-to-the-docker-hub" class="callout-inner">
<h3 class="callout-title">Docker can be used without connecting to the Docker Hub</h3>
<div class="callout-content">
<p>Note that while the Docker Hub is well integrated into Docker
functionality, the Docker Hub is certainly not required for all types of
use of Docker containers. For example, some organizations may run
container infrastructure that is entirely disconnected from the
Internet.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="exploring-an-example-docker-hub-page">Exploring an Example Docker Hub Page<a class="anchor" aria-label="anchor" href="#exploring-an-example-docker-hub-page"></a>
</h2>
<hr class="half-width">
<p>As an example of a Docker Hub page, let’s explore the page for the
official Python language container images. The most basic form of
containerized Python is in the <code>python</code> container image
(which is endorsed by the Docker team). Open your web browser to <a href="https://hub.docker.com/_/python" class="external-link">https://hub.docker.com/_/python</a>
to see what is on a typical Docker Hub software page.</p>
<p>The top-left provides information about the name, short description,
popularity (i.e., more than a billion downloads in the case of this
container image), and endorsements.</p>
<p>The top-right provides the command to pull this container image to
your computer.</p>
<p>The main body of the page contains many used headings, such as:</p>
<ul>
<li>Which tags (i.e., container image versions) are supported;</li>
<li>Summary information about where to get help, which computer
architectures are supported, etc.;</li>
<li>A longer description of the container image;</li>
<li>Examples of how to use the container image; and</li>
<li>The license that applies.</li>
</ul>
<p>The “How to use the image” section of most container images’ pages
will provide examples that are likely to cover your intended use of the
container image.</p>
</section><section><h2 class="section-heading" id="exploring-container-image-versions">Exploring Container Image Versions<a class="anchor" aria-label="anchor" href="#exploring-container-image-versions"></a>
</h2>
<hr class="half-width">
<p>A single Docker Hub page can have many different versions of
container images, based on the version of the software inside. These
versions are indicated by “tags”. When referring to the specific version
of a container image by its tag, you use a colon, <code>:</code>, like
this:</p>
<pre><code><span><span class="va">CONTAINER_IMAGE_NAME</span><span class="op">:</span><span class="va">TAG</span></span></code></pre>
<p>So if I wanted to download the <code>python</code> container image,
with Python 3.8, I would use this name:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> docker image pull python:3.8</span></code></pre>
</div>
<p>But if I wanted to download a Python 3.6 container image, I would use
this name:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> docker image pull python:3.6</span></code></pre>
</div>
<p>The default tag (which is used if you don’t specify one) is called
<code>latest</code>.</p>
<p>So far, we’ve only seen container images that are maintained by the
Docker team. However, it’s equally common to use container images that
have been produced by individual owners or organizations. Container
images that you create and upload to Docker Hub would fall into this
category, as would the container images maintained by organizations like
<a href="https://hub.docker.com/u/continuumio" class="external-link">ContinuumIO</a> (the
folks who develop the Anaconda Python environment) or community groups
like <a href="https://hub.docker.com/u/rocker" class="external-link">rocker</a>, a group that
builds community R container images.</p>
<p>The name for these group- or individually-managed container images
have this format:</p>
<pre><code><span><span class="va">OWNER</span><span class="op">/</span><span class="va">CONTAINER_IMAGE_NAME</span><span class="op">:</span><span class="va">TAG</span></span></code></pre>
<div id="repositories" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="repositories" class="callout-inner">
<h3 class="callout-title">Repositories</h3>
<div class="callout-content">
<p>The technical name for the contents of a Docker Hub page is a
“repository.” The tag indicates the specific version of the container
image that you’d like to use from a particular repository. So a slightly
more accurate version of the above example is:</p>
<pre><code><span><span class="va">OWNER</span><span class="op">/</span><span class="va">REPOSITORY</span><span class="op">:</span><span class="va">TAG</span></span></code></pre>
</div>
</div>
</div>
<div id="whats-in-a-name" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="whats-in-a-name" class="callout-inner">
<h3 class="callout-title">What’s in a name?</h3>
<div class="callout-content">
<p>How would I download the Docker container image produced by the
<code>rocker</code> group that has version 3.6.1 of R and the tidyverse
installed?</p>
<p>Note: the container image described in this exercise is large and
won’t be used later in this lesson, so you don’t actually need to pull
the container image – constructing the correct <code>docker pull</code>
command is sufficient.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>First, search for <code>rocker</code> in Docker Hub. Then look for
their <code>tidyverse</code> container image. You can look at the list
of tags, or just guess that the tag is <code>3.6.1</code>. Altogether,
that means that the name of the container image we want to download
is:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> docker image pull rocker/tidyverse:3.6.1</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="finding-container-images-on-docker-hub">Finding Container Images on Docker Hub<a class="anchor" aria-label="anchor" href="#finding-container-images-on-docker-hub"></a>
</h2>
<hr class="half-width">
<p>There are many different container images on Docker Hub. This is
where the real advantage of using containers shows up – each container
image represents a complete software installation that you can use and
access without any extra work!</p>
<p>The easiest way to find container images is to search on Docker Hub,
but sometimes software pages have a link to their container images from
their home page.</p>
<p>Note that anyone can create an account on Docker Hub and share
container images there, so it’s important to exercise caution when
choosing a container image on Docker Hub. These are some indicators that
a container image on Docker Hub is consistently maintained, functional
and secure:</p>
<ul>
<li>The container image is updated regularly.</li>
<li>The container image associated with a well established company,
community, or other group that is well-known.</li>
<li>There is a Dockerfile or other listing of what has been installed to
the container image.</li>
<li>The container image page has documentation on how to use the
container image.</li>
</ul>
<p>If a container image is never updated, created by a random person,
and does not have a lot of metadata, it is probably worth skipping over.
Even if such a container image is secure, it is not reproducible and not
a dependable way to run research computations.</p>
<div id="what-container-image-is-right-for-you" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="what-container-image-is-right-for-you" class="callout-inner">
<h3 class="callout-title">What container image is right for you?</h3>
<div class="callout-content">
<p>Find a Docker container image that’s relevant to you. Take into
account the suggestions above of what to look for as you evaluate
options. If you’re unsuccessful in your search, or don’t know what to
look for, you can use the R or Python container image we’ve already
seen.</p>
<p>Once you find a container image, use the skills from the previous
episode to download the container image and explore it.</p>
</div>
</div>
</div>
<!--  LocalWords:  keypoints links.md endcomment
 -->
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>The Docker Hub is an online repository of container images.</li>
<li>Many Docker Hub container images are public, and may be officially
endorsed.</li>
<li>Each Docker Hub page about a container image provides structured
information and subheadings</li>
<li>Most Docker Hub pages about container images contain sections that
provide examples of how to use those container images.</li>
<li>Many Docker Hub container images have multiple versions, indicated
by tags.</li>
<li>The naming convention for Docker container images is:
<code>OWNER/CONTAINER_IMAGE_NAME:TAG</code>
</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-creating-container-images"><p>Content from <a href="creating-container-images.html">Creating Your Own Container Images</a></p>
<hr>
<p>Last updated on 2024-10-22 |

        <a href="https://github.com/carpentries-incubator/docker-introduction/edit/main/episodes/creating-container-images.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I make my own Docker container images?</li>
<li>How do I document the ‘recipe’ for a Docker container image?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain the purpose of a <code>Dockerfile</code> and show some
simple examples.</li>
<li>Demonstrate how to build a Docker container image from a
<code>Dockerfile</code>.</li>
<li>Compare the steps of creating a container image interactively versus
a <code>Dockerfile</code>.</li>
<li>Create an installation strategy for a container image.</li>
<li>Demonstrate how to upload (‘push’) your container images to the
Docker Hub.</li>
<li>Describe the significance of the Docker Hub naming scheme.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>There are lots of reasons why you might want to create your
<strong>own</strong> Docker container image.</p>
<ul>
<li>You can’t find a container image with all the tools you need on
Docker Hub.</li>
<li>You want to have a container image to “archive” all the specific
software versions you ran for a project.</li>
<li>You want to share your workflow with someone else.</li>
</ul>
<section><h2 class="section-heading" id="interactive-installation">Interactive installation<a class="anchor" aria-label="anchor" href="#interactive-installation"></a>
</h2>
<hr class="half-width">
<p>Before creating a reproducible installation, let’s experiment with
installing software inside a container. Start a container from the
<code>alpine</code> container image we used before, interactively:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">-it</span> alpine sh</span></code></pre>
</div>
<p>Because this is a basic container, there’s a lot of things not
installed – for example, <code>python3</code>.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">/#</span> python3</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>sh: python3: not found</code></pre>
</div>
<p>Inside the container, we can run commands to install Python 3. The
Alpine version of Linux has a installation tool called <code>apk</code>
that we can use to install Python 3.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">/#</span> apk add <span class="at">--update</span> python3 py3-pip python3-dev</span></code></pre>
</div>
<p>We can test our installation by running a Python command:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">/#</span> python3 <span class="at">--version</span></span></code></pre>
</div>
<div id="exercise-searching-for-help" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-searching-for-help" class="callout-inner">
<h3 class="callout-title">Exercise: Searching for Help</h3>
<div class="callout-content">
<p>Can you find instructions for installing R on Alpine Linux? Do they
work?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>A quick search should hopefully show that the way to install R on
Alpine Linux is:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">/#</span> apk add R</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Once we exit, these changes are not saved to a new container image by
default. There is a command that will “snapshot” our changes, but
building container images this way is not easily reproducible. Instead,
we’re going to take what we’ve learned from this interactive
installation and create our container image from a reproducible recipe,
known as a <code>Dockerfile</code>.</p>
<p>If you haven’t already, exit out of the interactively running
container.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">/#</span> exit</span></code></pre>
</div>
</section><section><h2 class="section-heading" id="put-installation-instructions-in-a-dockerfile">Put installation instructions in a <code>Dockerfile</code>
<a class="anchor" aria-label="anchor" href="#put-installation-instructions-in-a-dockerfile"></a>
</h2>
<hr class="half-width">
<p>A <code>Dockerfile</code> is a plain text file with keywords and
commands that can be used to create a new container image.</p>
<p>From your shell, go to the folder you downloaded at the start of the
lesson and print out the Dockerfile inside:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/docker-intro/basic</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="ex">$</span> cat Dockerfile</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>FROM &lt;EXISTING IMAGE&gt;
RUN &lt;INSTALL CMDS FROM SHELL&gt;
CMD &lt;CMD TO RUN BY DEFAULT&gt;</code></pre>
</div>
<p>Let’s break this file down:</p>
<ul>
<li>The first line, <code>FROM</code>, indicates which container image
we’re starting with. It is the “base” container image we are going to
start from.</li>
<li>The next two lines <code>RUN</code>, will indicate installation
commands we want to run. These are the same commands that we used
interactively above.</li>
<li>The last line, <code>CMD</code>, indicates the default command we
want a container based on this container image to run, if no other
command is provided. It is recommended to provide <code>CMD</code> in
<em>exec-form</em> (see the <a href="https://docs.docker.com/engine/reference/builder/#cmd" class="external-link"><code>CMD</code>
section</a> of the Dockerfile documentation for more details). It is
written as a list which contains the executable to run as its first
element, optionally followed by any arguments as subsequent elements.
The list is enclosed in square brackets (<code>[]</code>) and its
elements are double-quoted (<code>"</code>) strings which are separated
by commas. For example,
<code>CMD ["ls", "-lF", "--color", "/etc"]</code> would translate to
<code>ls -lF --color /etc</code>.</li>
</ul>
<div id="shell-form-and-exec-form-for-cmd" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="shell-form-and-exec-form-for-cmd" class="callout-inner">
<h3 class="callout-title">
<em>shell-form</em> and <em>exec-form</em> for
CMD</h3>
<div class="callout-content">
<p>Another way to specify the parameter for the <a href="https://docs.docker.com/engine/reference/builder/#cmd" class="external-link"><code>CMD</code>
instruction</a> is the <em>shell-form</em>. Here you type the command as
you would call it from the command line. Docker then silently runs this
command in the image’s standard shell. <code>CMD cat /etc/passwd</code>
is equivalent to <code>CMD ["/bin/sh", "-c", "cat /etc/passwd"]</code>.
We recommend to prefer the more explicit <em>exec-form</em> because we
will be able to create more flexible container image command options and
make sure complex commands are unambiguous in this format.</p>
</div>
</div>
</div>
<div id="exercise-take-a-guess" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-take-a-guess" class="callout-inner">
<h3 class="callout-title">Exercise: Take a Guess</h3>
<div class="callout-content">
<p>Do you have any ideas about what we should use to fill in the sample
Dockerfile to replicate the installation we did above?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Solution: </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>Based on our experience above, edit the <code>Dockerfile</code> (in
your text editor of choice) to look like this:</p>
<pre><code>FROM alpine
RUN apk add --update python3 py3-pip python3-dev
CMD ["python3", "--version"]</code></pre>
</div>
</div>
</div>
</div>
<p>The recipe provided by the <code>Dockerfile</code> shown in the
solution to the preceding exercise will use Alpine Linux as the base
container image, add Python 3, the pip package management tool and some
additional Python header files, and set a default command to request
Python 3 to report its version information.</p>
</section><section><h2 class="section-heading" id="create-a-new-docker-image">Create a new Docker image<a class="anchor" aria-label="anchor" href="#create-a-new-docker-image"></a>
</h2>
<hr class="half-width">
<p>So far, we only have a text file named <code>Dockerfile</code> – we
do not yet have a container image. We want Docker to take this
<code>Dockerfile</code>, run the installation commands contained within
it, and then save the resulting container as a new container image. To
do this we will use the <code>docker image build</code> command.</p>
<p>We have to provide <code>docker image build</code> with two pieces of
information:</p>
<ul>
<li>the location of the <code>Dockerfile</code>
</li>
<li>the name of the new container image. Remember the naming scheme from
before? You should name your new image with your Docker Hub username and
a name for the container image, like this:
<code>USERNAME/CONTAINER_IMAGE_NAME</code>.</li>
</ul>
<p>All together, the build command that you should run on your computer,
will have a similar structure to this:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> docker image build <span class="at">-t</span> USERNAME/CONTAINER_IMAGE_NAME .</span></code></pre>
</div>
<p>The <code>-t</code> option names the container image; the final dot
indicates that the <code>Dockerfile</code> is in our current
directory.</p>
<p>For example, if my user name was <code>alice</code> and I wanted to
call my container image <code>alpine-python</code>, I would use this
command:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> docker image build <span class="at">-t</span> alice/alpine-python .</span></code></pre>
</div>
<div id="build-context" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="build-context" class="callout-inner">
<h3 class="callout-title">Build Context</h3>
<div class="callout-content">
<p>Notice that the final input to <code>docker image build</code> isn’t
the Dockerfile – it’s a directory! In the command above, we’ve used the
current working directory (<code>.</code>) of the shell as the final
input to the <code>docker image build</code> command. This option
provides what is called the <em>build context</em> to Docker – if there
are files being copied into the built container image <a href="advanced-containers.html">more details in the next episode</a>
they’re assumed to be in this location. Docker expects to see a
Dockerfile in the build context also (unless you tell it to look
elsewhere).</p>
<p>Even if it won’t need all of the files in the build context
directory, Docker does “load” them before starting to build, which means
that it’s a good idea to have only what you need for the container image
in a build context directory, as we’ve done in this example.</p>
</div>
</div>
</div>
<div id="exercise-review" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-review" class="callout-inner">
<h3 class="callout-title">Exercise: Review!</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>Think back to earlier. What command can you run to check if your
container image was created successfully? (Hint: what command shows the
container images on your computer?)</p></li>
<li><p>We didn’t specify a tag for our container image name. What tag
did Docker automatically use?</p></li>
<li><p>What command will run a container based on the container image
you’ve created? What should happen by default if you run such a
container? Can you make it do something different, like print “hello
world”?</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><p>To see your new image, run <code>docker image ls</code>. You
should see the name of your new container image under the “REPOSITORY”
heading.</p></li>
<li><p>In the output of <code>docker image ls</code>, you can see that
Docker has automatically used the <code>latest</code> tag for our new
container image.</p></li>
<li><p>We want to use <code>docker container run</code> to run a
container based on a container image.</p></li>
</ol>
<p>The following command should run a container and print out our
default message, the version of Python:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> docker container run alice/alpine-python</span></code></pre>
</div>
<p>To run a container based on our container image and print out “Hello
world” instead:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> docker container run alice/alpine-python echo <span class="st">"Hello World"</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>While it may not look like you have achieved much, you have already
effected the combination of a lightweight Linux operating system with
your specification to run a given command that can operate reliably on
macOS, Microsoft Windows, Linux and on the cloud!</p>
</section><section><h2 class="section-heading" id="boring-but-important-notes-about-installation">Boring but important notes about installation<a class="anchor" aria-label="anchor" href="#boring-but-important-notes-about-installation"></a>
</h2>
<hr class="half-width">
<p>There are a lot of choices when it comes to installing software –
sometimes too many! Here are some things to consider when creating your
own container image:</p>
<ul>
<li>
<strong>Start smart</strong>, or, don’t install everything from
scratch! If you’re using Python as your main tool, start with a <a href="https://hub.docker.com/_/python" class="external-link">Python container image</a>. Same
with the <a href="https://hub.docker.com/r/rocker/r-ver/" class="external-link">R programming
language</a>. We’ve used Alpine Linux as an example in this lesson, but
it’s generally not a good container image to start with for initial
development and experimentation because it is a less common distribution
of Linux; using <a href="https://hub.docker.com/_/ubuntu" class="external-link">Ubuntu</a>, <a href="https://hub.docker.com/_/debian" class="external-link">Debian</a> and <a href="https://hub.docker.com/_/centos" class="external-link">CentOS</a> are all good options
for scientific software installations. The program you’re using might
recommend a particular distribution of Linux, and if so, it may be
useful to start with a container image for that distribution.</li>
<li>
<strong>How big?</strong> How much software do you really need to
install? When you have a choice, lean towards using smaller starting
container images and installing only what’s needed for your software, as
a bigger container image means longer download times to use.</li>
<li>
<strong>Know (or Google) your Linux</strong>. Different
distributions of Linux often have distinct sets of tools for installing
software. The <code>apk</code> command we used above is the software
package installer for Alpine Linux. The installers for various common
Linux distributions are listed below:
<ul>
<li>Ubuntu: <code>apt</code> or <code>apt-get</code>
</li>
<li>Debian: <code>deb</code>
</li>
<li>CentOS: <code>yum</code> Most common software installations are
available to be installed via these tools. A web search for “install X
on Y Linux” is usually a good start for common software installation
tasks; if something isn’t available via the Linux distribution’s
installation tools, try the options below.</li>
</ul>
</li>
<li>
<strong>Use what you know</strong>. You’ve probably used commands
like <code>pip</code> or <code>install.packages()</code> before on your
own computer – these will also work to install things in container
images (if the basic scripting language is installed).</li>
<li>
<strong>README</strong>. Many scientific software tools have a
README or installation instructions that lay out how to install
software. You want to look for instructions for Linux. If the install
instructions include options like those suggested above, try those
first.</li>
</ul>
<p>In general, a good strategy for installing software is:</p>
<ul>
<li>Make a list of what you want to install.</li>
<li>Look for pre-existing container images.</li>
<li>Read through instructions for software you’ll need to install.</li>
<li>Try installing everything interactively in your base container –
take notes!</li>
<li>From your interactive installation, create a <code>Dockerfile</code>
and then try to build the container image from that.</li>
</ul></section><section><h2 class="section-heading" id="share-your-new-container-image-on-docker-hub">Share your new container image on Docker Hub<a class="anchor" aria-label="anchor" href="#share-your-new-container-image-on-docker-hub"></a>
</h2>
<hr class="half-width">
<p>Container images that you release publicly can be stored on the
Docker Hub for free. If you name your container image as described
above, with your Docker Hub username, all you need to do is run the
opposite of <code>docker image pull</code> –
<code>docker image push</code>.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> docker image push alice/alpine-python</span></code></pre>
</div>
<p>Make sure to substitute the full name of your container image!</p>
<p>In a web browser, open <a href="https://hub.docker.com" class="external-link">https://hub.docker.com</a>, and on your
user page you should now see your container image listed, for anyone to
use or build on.</p>
<div id="logging-in" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="logging-in" class="callout-inner">
<h3 class="callout-title">Logging In</h3>
<div class="callout-content">
<p>Technically, you have to be logged into Docker on your computer for
this to work. Usually it happens by default, but if
<code>docker image push</code> doesn’t work for you, run
<code>docker login</code> first, enter your Docker Hub username and
password, and then try <code>docker image push</code> again.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="whats-in-a-name-again">What’s in a name? (again)<a class="anchor" aria-label="anchor" href="#whats-in-a-name-again"></a>
</h2>
<hr class="half-width">
<p>You don’t <em>have</em> to name your containers images using the
<code>USERNAME/CONTAINER_IMAGE_NAME:TAG</code> naming scheme. On your
own computer, you can call container images whatever you want, and refer
to them by the names you choose. It’s only when you want to share a
container image that it needs the correct naming format.</p>
<p>You can rename container images using the
<code>docker image tag</code> command. For example, imagine someone
named Alice has been working on a workflow container image and called it
<code>workflow-test</code> on her own computer. She now wants to share
it in her <code>alice</code> Docker Hub account with the name
<code>workflow-complete</code> and a tag of <code>v1</code>. Her
<code>docker image tag</code> command would look like this:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> docker image tag workflow-test alice/workflow-complete:v1</span></code></pre>
</div>
<p>She could then push the re-named container image to Docker Hub, using
<code>docker image push alice/workflow-complete:v1</code></p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>Dockerfile</code>s specify what is within Docker container
images.</li>
<li>The <code>docker image build</code> command is used to build a
container image from a <code>Dockerfile</code>.</li>
<li>You can share your Docker container images through the Docker Hub so
that others can create Docker containers from your container
images.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-advanced-containers"><p>Content from <a href="advanced-containers.html">Creating More Complex Container Images</a></p>
<hr>
<p>Last updated on 2024-08-16 |

        <a href="https://github.com/carpentries-incubator/docker-introduction/edit/main/episodes/advanced-containers.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li><p>How can I add local files (e.g. data files) into container images
at build time?</p></li>
<li><p>How can I access files stored on the host system from within a
running Docker container?</p></li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how you can include files within Docker container images
when you build them.</li>
<li>Explain how you can access files on the Docker host from your Docker
containers.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In order to create and use your own container images, you may need
more information than our previous example. You may want to use files
from outside the container, that are not included within the container
image, either by copying the files into the container image, or by
making them visible within a running container from their existing
location on your host system. You may also want to learn a little bit
about how to install software within a running container or a container
image. This episode will look at these advanced aspects of running a
container or building a container image. Note that the examples will get
gradually more and more complex – most day-to-day use of containers and
container images can be accomplished using the first 1–2 sections on
this page.</p>
<section><h2 class="section-heading" id="using-scripts-and-files-from-outside-the-container">Using scripts and files from outside the container<a class="anchor" aria-label="anchor" href="#using-scripts-and-files-from-outside-the-container"></a>
</h2>
<hr class="half-width">
<p>In your shell, change to the <code>sum</code> folder in the
<code>docker-intro</code> folder and look at the files inside.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/docker-intro/sum</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<p>This folder has both a <code>Dockerfile</code> and a Python script
called <code>sum.py</code>. Let’s say we wanted to try running the
script using a container based on our recently created
<code>alpine-python</code> container image.</p>
<div id="running-containers" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="running-containers" class="callout-inner">
<h3 class="callout-title">Running containers</h3>
<div class="callout-content">
<p>Question: What command would we use to run Python from the
<code>alpine-python</code> container?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>We can run a container from the alpine-python container image
using:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> docker container run alice/alpine-python</span></code></pre>
</div>
<p>What happens? Since the <code>Dockerfile</code> that we built this
container image from had a <code>CMD</code> entry that specified
<code>["python3", "--version"]</code>, running the above command simply
starts a container from the image, runs the
<code>python3 --version</code> command and exits. You should have seen
the installed version of Python printed to the terminal.</p>
<p>Instead, if we want to run an interactive Python terminal, we can use
<code>docker container run</code> to override the default run command
embedded within the container image. So we could run:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">-it</span> alice/alpine-python python3</span></code></pre>
</div>
<p>The <code>-it</code> tells Docker to set up and interactive terminal
connection to the running container, and then we’re telling Docker to
run the <code>python3</code> command inside the container which gives us
an interactive Python interpreter prompt. <em>(type <code>exit()</code>
to exit!)</em></p>
</div>
</div>
</div>
</div>
<p>If we try running the container and Python script, what happens?</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> docker container run alice/alpine-python python3 sum.py</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>python3: can't open file '//sum.py': [Errno 2] No such file or directory</code></pre>
</div>
<div id="no-such-file-or-directory" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="no-such-file-or-directory" class="callout-inner">
<h3 class="callout-title">No such file or directory</h3>
<div class="callout-content">
<p>Question: What does the error message mean? Why might the Python
inside the container not be able to find or open our script?</p>
<p>This question is here for you to think about - we explore the answer
to this question in the content below.</p>
</div>
</div>
</div>
<p>The problem here is that the container and its filesystem is separate
from our host computer’s filesystem. When the container runs, it can’t
see anything outside itself, including any of the files on our computer.
In order to use Python (inside the container) and our script (outside
the container, on our host computer), we need to create a link between
the directory on our computer and the container.</p>
<p>This link is called a “mount” and is what happens automatically when
a USB drive or other external hard drive gets connected to a computer –
you can see the contents appear as if they were on your computer.</p>
<p>We can create a mount between our computer and the running container
by using an additional option to <code>docker container run</code>.
We’ll also use the variable <code>${PWD}</code> which will substitute in
our current working directory. The option will look like this</p>
<p><code>--mount type=bind,source=${PWD},target=/temp</code></p>
<p>What this means is: make my current working directory (on the host
computer) – the source – <em>visible</em> within the container that is
about to be started, and inside this container, name the directory
<code>/temp</code> – the target.</p>
<div id="types-of-mounts" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="types-of-mounts" class="callout-inner">
<h3 class="callout-title">Types of mounts</h3>
<div class="callout-content">
<p>You will notice that we set the mount <code>type=bind</code>, there
are other types of mount that can be used in Docker
(e.g. <code>volume</code> and <code>tmpfs</code>). We do not cover other
types of mounts or the differences between these mount types in the
course as it is more of an advanced topic. You can find more information
on the different mount types in <a href="https://docs.docker.com/storage/" class="external-link">the Docker
documentation</a>.</p>
</div>
</div>
</div>
<p>Let’s try running the command now:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">--mount</span> type=bind,source=<span class="va">${PWD}</span>,target=/temp alice/alpine-python python3 sum.py</span></code></pre>
</div>
<p>But we get the same error!</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>python3: can't open file '//sum.py': [Errno 2] No such file or directory</code></pre>
</div>
<p>This final piece is a bit tricky – we really have to remember to put
ourselves inside the container. Where is the <code>sum.py</code> file?
It’s in the directory that’s been mapped to <code>/temp</code> – so we
need to include that in the path to the script. This command should give
us what we need:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">--mount</span> type=bind,source=<span class="va">${PWD}</span>,target=/temp alice/alpine-python python3 /temp/sum.py</span></code></pre>
</div>
<p>Note that if we create any files in the <code>/temp</code> directory
while the container is running, these files will appear on our host
filesystem in the original directory and will stay there even when the
container stops.</p>
<div id="other-commonly-used-docker-run-flags" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="other-commonly-used-docker-run-flags" class="callout-inner">
<h3 class="callout-title">Other Commonly Used Docker Run Flags</h3>
<div class="callout-content">
<p>Docker run has many other useful flags to alter its function. A
couple that are commonly used include <code>-w</code> and
<code>-u</code>.</p>
<p>The <code>--workdir</code>/<code>-w</code> flag sets the working
directory a.k.a. runs the command being executed inside the directory
specified. For example, the following code would run the
<code>pwd</code> command in a container started from the latest ubuntu
image in the <code>/home/alice</code> directory and print
<code>/home/alice</code>. If the directory doesn’t exist in the image it
will create it.</p>
<pre><code>docker container run -w /home/alice/ ubuntu pwd</code></pre>
<p>The <code>--user</code>/<code>-u</code> flag lets you specify the
username you would like to run the container as. This is helpful if
you’d like to write files to a mounted folder and not write them as
<code>root</code> but rather your own user identity and group. A common
example of the <code>-u</code> flag is
<code>--user $(id -u):$(id -g)</code> which will fetch the current
user’s ID and group and run the container as that user.</p>
</div>
</div>
</div>
<div id="exercise-explore-the-script" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-explore-the-script" class="callout-inner">
<h3 class="callout-title">Exercise: Explore the script</h3>
<div class="callout-content">
<p>What happens if you use the <code>docker container run</code> command
above and put numbers after the script name?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>This script comes from <a href="https://wiki.python.org/moin/SimplePrograms" class="external-link">the Python Wiki</a>
and is set to add all numbers that are passed to it as arguments.</p>
</div>
</div>
</div>
</div>
<div id="exercise-checking-the-options" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-checking-the-options" class="callout-inner">
<h3 class="callout-title">Exercise: Checking the options</h3>
<div class="callout-content">
<p>Our Docker command has gotten much longer! Can you go through each
piece of the Docker command above and explain what it does? How would
you characterize the key components of a Docker command?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>Here’s a breakdown of each piece of the command above</p>
<ul>
<li>
<code>docker container run</code>: use Docker to run a
container</li>
<li>
<code>--mount type=bind,source=${PWD},target=/temp</code>: connect
my current working directory (<code>${PWD}</code>) as a folder inside
the container called <code>/temp</code>
</li>
<li>
<code>alice/alpine-python</code>: name of the container image to use
to run the container</li>
<li>
<code>python3 /temp/sum.py</code>: what commands to run in the
container</li>
</ul>
<p>More generally, every Docker command will have the form:
<code>docker [action] [docker options] [docker container image] [command to run inside]</code></p>
</div>
</div>
</div>
</div>
<div id="exercise-interactive-jobs" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-interactive-jobs" class="callout-inner">
<h3 class="callout-title">Exercise: Interactive jobs</h3>
<div class="callout-content">
<p>Try using the directory mount option but run the container
interactively. Can you find the folder that’s connected to your host
computer? What’s inside?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>The docker command to run the container interactively is:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">--mount</span> type=bind,source=<span class="va">${PWD}</span>,target=/temp <span class="at">-it</span> alice/alpine-python sh</span></code></pre>
</div>
<p>Once inside, you should be able to navigate to the <code>/temp</code>
folder and see that’s contents are the same as the files on your host
computer:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">/#</span> cd /temp</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="ex">/#</span> ls</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Mounting a directory can be very useful when you want to run the
software inside your container on many different input files. In other
situations, you may want to save or archive an authoritative version of
your data by adding it to the container image permanently. That’s what
we will cover next.</p>
</section><section><h2 class="section-heading" id="including-your-scripts-and-data-within-a-container-image">Including your scripts and data within a container image<a class="anchor" aria-label="anchor" href="#including-your-scripts-and-data-within-a-container-image"></a>
</h2>
<hr class="half-width">
<p>Our next project will be to add our own files to a container image –
something you might want to do if you’re sharing a finished analysis or
just want to have an archived copy of your entire analysis including the
data. Let’s assume that we’ve finished with our <code>sum.py</code>
script and want to add it to the container image itself.</p>
<p>In your shell, you should still be in the <code>sum</code> folder in
the <code>docker-intro</code> folder.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> /Users/yourname/Desktop/docker-intro/sum</span></code></pre>
</div>
<p>Let’s add a new line to the <code>Dockerfile</code> we’ve been using
so far to create a copy of <code>sum.py</code>. We can do so by using
the <code>COPY</code> keyword.</p>
<pre><code>COPY sum.py /home</code></pre>
<p>This line will cause Docker to copy the file from your computer into
the container’s filesystem. Let’s build the container image like before,
but give it a different name:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> docker image build <span class="at">-t</span> alice/alpine-sum .</span></code></pre>
</div>
<div id="the-importance-of-command-order-in-a-dockerfile" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-importance-of-command-order-in-a-dockerfile" class="callout-inner">
<h3 class="callout-title">The Importance of Command Order in a Dockerfile</h3>
<div class="callout-content">
<p>When you run <code>docker image build</code> it executes the build in
the order specified in the <code>Dockerfile</code>. This order is
important for rebuilding and you typically will want to put your
<code>RUN</code> commands before your <code>COPY</code> commands.</p>
<p>Docker builds the layers of commands in order. This becomes important
when you need to rebuild container images. If you change layers later in
the <code>Dockerfile</code> and rebuild the container image, Docker
doesn’t need to rebuild the earlier layers but will instead used a
stored (called “cached”) version of those layers.</p>
<p>For example, in an instance where you wanted to copy
<code>multiply.py</code> into the container image instead of
<code>sum.py</code>. If the <code>COPY</code> line came before the
<code>RUN</code> line, it would need to rebuild the whole image. If the
<code>COPY</code> line came second then it would use the cached
<code>RUN</code> layer from the previous build and then only rebuild the
<code>COPY</code> layer.</p>
</div>
</div>
</div>
<div id="exercise-did-it-work" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-did-it-work" class="callout-inner">
<h3 class="callout-title">Exercise: Did it work?</h3>
<div class="callout-content">
<p>Can you remember how to run a container interactively? Try that with
this one. Once inside, try running the Python script.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<p>You can start the container interactively like so:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">-it</span> alice/alpine-sum sh</span></code></pre>
</div>
<p>You should be able to run the python command inside the container
like this:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">/#</span> python3 /home/sum.py</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>This <code>COPY</code> keyword can be used to place your own scripts
or own data into a container image that you want to publish or use as a
record. Note that it’s not necessarily a good idea to put your scripts
inside the container image if you’re constantly changing or editing
them. Then, referencing the scripts from outside the container is a good
idea, as we did in the previous section. You also want to think
carefully about size – if you run <code>docker image ls</code> you’ll
see the size of each container image all the way on the right of the
screen. The bigger your container image becomes, the harder it will be
to easily download.</p>
<div id="security-warning" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="security-warning" class="callout-inner">
<h3 class="callout-title">Security Warning</h3>
<div class="callout-content">
<p>Login credentials including passwords, tokens, secure access tokens
or other secrets must never be stored in a container. If secrets are
stored, they are at high risk to be found and exploited when made
public.</p>
</div>
</div>
</div>
<div id="copying-alternatives" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="copying-alternatives" class="callout-inner">
<h3 class="callout-title">Copying alternatives</h3>
<div class="callout-content">
<p>Another trick for getting your own files into a container image is by
using the <code>RUN</code> keyword and downloading the files from the
internet. For example, if your code is in a GitHub repository, you could
include this statement in your Dockerfile to download the latest version
every time you build the container image:</p>
<pre><code>RUN git clone https://github.com/alice/mycode</code></pre>
<p>Similarly, the <code>wget</code> command can be used to download any
file publicly available on the internet:</p>
<pre><code>RUN wget ftp://ftp.ncbi.nlm.nih.gov/blast/executables/blast+/2.10.0/ncbi-blast-2.10.0+-x64-linux.tar.gz</code></pre>
<p>Note that the above <code>RUN</code> examples depend on commands
(<code>git</code> and <code>wget</code> respectively) that must be
available within your container: Linux distributions such as Alpine may
require you to install such commands before using them within
<code>RUN</code> statements.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="more-fancy-dockerfile-options-optional-for-presentation-or-as-exercises">More fancy <code>Dockerfile</code> options (optional, for
presentation or as exercises)<a class="anchor" aria-label="anchor" href="#more-fancy-dockerfile-options-optional-for-presentation-or-as-exercises"></a>
</h2>
<hr class="half-width">
<p>We can expand on the example above to make our container image even
more “automatic”. Here are some ideas:</p>
<div class="section level3">
<h3 id="make-the-sum-py-script-run-automatically">Make the <code>sum.py</code> script run automatically<a class="anchor" aria-label="anchor" href="#make-the-sum-py-script-run-automatically"></a>
</h3>
<pre><code>FROM alpine
RUN apk add --update python3 py3-pip python3-dev
COPY sum.py /home

# Run the sum.py script as the default command
CMD ["python3", "/home/sum.py"]</code></pre>
<p>Build and test it:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> docker image build <span class="at">-t</span> alpine-sum:v1 .</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="ex">$</span> docker container run alpine-sum:v1</span></code></pre>
</div>
<p>You’ll notice that you can run the container without arguments just
fine, resulting in <code>sum = 0</code>, but this is boring. Supplying
arguments however doesn’t work:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">docker</span> container run alpine-sum:v1 10 11 12</span></code></pre>
</div>
<p>results in</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>docker: Error response from daemon: OCI runtime create failed:
container_linux.go:349: starting container process caused "exec:
\"10\": executable file not found in $PATH": unknown.</code></pre>
</div>
<p>This is because the arguments <code>10 11 12</code> are interpreted
as a <em>command</em> that replaces the default command given by
<code>CMD ["python3", "/home/sum.py"]</code> in the image.</p>
<p>To achieve the goal of having a command that <em>always</em> runs
when a container is run from the container image <em>and</em> can be
passed the arguments given on the command line, use the keyword
<code>ENTRYPOINT</code> in the <code>Dockerfile</code>.</p>
<pre><code>FROM alpine

RUN apk add --update python3 py3-pip python3-dev
COPY sum.py /home

# Run the sum.py script as the default command and
# allow people to enter arguments for it
ENTRYPOINT ["python3", "/home/sum.py"]

# Give default arguments, in case none are supplied on
# the command-line
CMD ["10", "11"]</code></pre>
<p>Build and test it:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> docker image build <span class="at">-t</span> alpine-sum:v2 .</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="co"># Most of the time you are interested in the sum of 10 and 11:</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="ex">$</span> docker container run alpine-sum:v2</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="co"># Sometimes you have more challenging calculations to do:</span></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="ex">$</span> docker container run alpine-sum:v2 12 13 14</span></code></pre>
</div>
<div id="overriding-the-entrypoint" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="overriding-the-entrypoint" class="callout-inner">
<h3 class="callout-title">Overriding the ENTRYPOINT</h3>
<div class="callout-content">
<p>Sometimes you don’t want to run the image’s <code>ENTRYPOINT</code>.
For example if you have a specialized container image that does only
sums, but you need an interactive shell to examine the container:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">-it</span> alpine-sum:v2 /bin/sh</span></code></pre>
</div>
<p>will yield</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Please supply integer arguments</code></pre>
</div>
<p>You need to override the <code>ENTRYPOINT</code> statement in the
container image like so:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">-it</span> <span class="at">--entrypoint</span> /bin/sh alpine-sum:v2</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="add-the-sum-py-script-to-the-path-so-you-can-run-it-directly">Add the <code>sum.py</code> script to the <code>PATH</code> so you
can run it directly:<a class="anchor" aria-label="anchor" href="#add-the-sum-py-script-to-the-path-so-you-can-run-it-directly"></a>
</h3>
<pre><code>FROM alpine

RUN apk add --update python3 py3-pip python3-dev

COPY sum.py /home
# set script permissions
RUN chmod +x /home/sum.py
# add /home folder to the PATH
ENV PATH /home:$PATH</code></pre>
<p>Build and test it:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> docker image build <span class="at">-t</span> alpine-sum:v3 .</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="ex">$</span> docker container run alpine-sum:v3 sum.py 1 2 3 4</span></code></pre>
</div>
<div id="best-practices-for-writing-dockerfiles" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="best-practices-for-writing-dockerfiles" class="callout-inner">
<h3 class="callout-title">Best practices for writing Dockerfiles</h3>
<div class="callout-content">
<p>Take a look at Nüst et al.’s “<a href="https://doi.org/10.1371/journal.pcbi.1008316" class="external-link"><em>Ten simple rules
for writing Dockerfiles for reproducible data science</em></a>” [1] for
some great examples of best practices to use when writing Dockerfiles.
The <a href="https://github.com/nuest/ten-simple-rules-dockerfiles" class="external-link">GitHub
repository</a> associated with the paper also has a set of <a href="https://github.com/nuest/ten-simple-rules-dockerfiles/tree/master/examples" class="external-link">example
<code>Dockerfile</code>s</a> demonstrating how the rules highlighted by
the paper can be applied.</p>
<p><small>[1] Nüst D, Sochat V, Marwick B, Eglen SJ, Head T, et
al. (2020) Ten simple rules for writing Dockerfiles for reproducible
data science. PLOS Computational Biology 16(11): e1008316. <a href="https://doi.org/10.1371/journal.pcbi.1008316" class="external-link">https://doi.org/10.1371/journal.pcbi.1008316</a></small></p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Docker allows containers to read and write files from the Docker
host.</li>
<li>You can include files from your Docker host into your Docker
container images by using the <code>COPY</code> instruction in your
<code>Dockerfile</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-docker-image-examples"><p>Content from <a href="docker-image-examples.html">Examples of Using Container Images in Practice</a></p>
<hr>
<p>Last updated on 2024-08-16 |

        <a href="https://github.com/carpentries-incubator/docker-introduction/edit/main/episodes/docker-image-examples.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I use Docker for my own work?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use existing container images and Docker in a research project.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Now that we have learned the basics of working with Docker container
images and containers, let’s apply what we learned to an example
workflow.</p>
<p>You may choose one or more of the following examples to practice
using containers.</p>
<section><h2 class="section-heading" id="github-actions-example">GitHub Actions Example<a class="anchor" aria-label="anchor" href="#github-actions-example"></a>
</h2>
<hr class="half-width">
<p>In this <a href="e01-github-actions.html">GitHub Actions example</a>,
you can learn more about continuous integration in the cloud and how you
can use container images with GitHub to automate repetitive tasks like
testing code or deploying websites.</p>
<!--- Placeholder for
## Geospatial Example

Ask @mkuzak to make a PR to add extra for <https://github.com/escience-academy/docker-gdal-demo>

-->
</section><section><h2 class="section-heading" id="using-containers-on-an-hpc-cluster">Using Containers on an HPC Cluster<a class="anchor" aria-label="anchor" href="#using-containers-on-an-hpc-cluster"></a>
</h2>
<hr class="half-width">
<p>It is possible to run containers on shared computing systems run by a
university or national computing center. As a researcher, you can build
container images and test containers on your own computer and then run
your full-scale computing work on a shared computing system like a high
performance cluster or high throughput grid.</p>
<p>The catch? Most university and national computing centers do not
support <em>running</em> containers with Docker commands, and instead
use a similar tool called Singularity or Shifter. However, both of these
programs can be used to run containers based on Docker container images,
so often people create their container image as a Docker container
image, so they can run it using either of Docker or Singularity.</p>
<p>There isn’t yet a working example of how to use Docker container
images on a shared computing system, partially because each system is
slightly different, but the following resources show what it can look
like:</p>
<ul>
<li>
<a href="https://carpentries-incubator.github.io/singularity-introduction/" class="external-link">Introduction
to Singularity</a>: See the episode titled “Running MPI parallel jobs
using Singularity containers”</li>
<li>
<a href="https://pawseysc.github.io/container-workflows/" class="external-link">Container
Workflows at Pawsey</a>: See the episode titled “Run containers on HPC
with Shifter (and Singularity)”</li>
</ul></section><section><h2 class="section-heading" id="seeking-examples">Seeking Examples<a class="anchor" aria-label="anchor" href="#seeking-examples"></a>
</h2>
<hr class="half-width">
<p>Do you have another example of using Docker in a workflow related to
your field? Please <a href="https://github.com/carpentries-incubator/docker-introduction/issues/new" class="external-link">open
a lesson issue</a> or <a href="https://github.com/carpentries-incubator/docker-introduction/pulls" class="external-link">submit
a pull request</a> to add it to this episode and the extras section of
the lesson.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>There are many ways you might use Docker and existing container
images in your research project.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-reproduciblity"><p>Content from <a href="reproduciblity.html">Containers in Research Workflows: Reproducibility and Granularity</a></p>
<hr>
<p>Last updated on 2024-08-16 |

        <a href="https://github.com/carpentries-incubator/docker-introduction/edit/main/episodes/reproduciblity.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I use container images to make my research more
reproducible?</li>
<li>How do I incorporate containers into my research workflow?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand how container images can help make research more
reproducible.</li>
<li>Understand what practical steps I can take to improve the
reproducibility of my research using containers.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Although this workshop is titled “Reproducible computational
environments using containers”, so far we have mostly covered the
mechanics of using Docker with only passing reference to the
reproducibility aspects. In this section, we discuss these aspects in
more detail.</p>
<div id="work-in-progress" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="work-in-progress" class="callout-inner">
<h3 class="callout-title">Work in progress…</h3>
<div class="callout-content">
<p>Note that reproducibility aspects of software and containers are an
active area of research, discussion and development so are subject to
many changes. We will present some ideas and approaches here but best
practices will likely evolve in the near future.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="reproducibility">Reproducibility<a class="anchor" aria-label="anchor" href="#reproducibility"></a>
</h2>
<hr class="half-width">
<p>By <em>reproducibility</em> here we mean the ability of someone else
(or your future self) being able to reproduce what you did
computationally at a particular time (be this in research, analysis or
something else) as closely as possible, even if they do not have access
to exactly the same hardware resources that you had when you did the
original work.</p>
<p>What makes this especially important? With research being
increasingly digital in nature, more and more of our research outputs
are a result of the use of software and data processing or analysis.
With complex software stacks or groups of dependencies often being
required to run research software, we need approaches to ensure that we
can make it as easy as possible to recreate an environment in which a
given research process was undertaken. There many reasons why this
matters, one example being someone wanting to reproduce the results of a
publication in order to verify them and then build on that research.</p>
<p>Some examples of why containers are an attractive technology to help
with reproducibility include:</p>
<ul>
<li>The same computational work can be run seamlessly on different
operating systems (e.g. Windows, macOS, Linux).</li>
<li>You can save the exact process that you used for your computational
work (rather than relying on potentially incomplete notes).</li>
<li>You can save the exact versions of software and their dependencies
in the container image.</li>
<li>You can provide access to legacy versions of software and underlying
dependencies which may not be generally available any more.</li>
<li>Depending on their size, you can also potentially store a copy of
key data within the container image.</li>
<li>You can archive and share a container image as well as associating a
persistent identifier with it, to allow other researchers to reproduce
and build on your work.</li>
</ul></section><section><h2 class="section-heading" id="sharing-images">Sharing images<a class="anchor" aria-label="anchor" href="#sharing-images"></a>
</h2>
<hr class="half-width">
<p>As we have already seen, the Docker Hub provides a platform for
sharing container images publicly. Once you have uploaded a container
image, you can point people to its public location and they can download
and build upon it.</p>
<p>This is fine for working collaboratively with container images on a
day-to-day basis but the Docker Hub is not a good option for long-term
archiving of container images in support of research and publications
as:</p>
<ul>
<li>free accounts have a limit on how long a container image will be
hosted if it is not updated</li>
<li>it does not support adding persistent identifiers to container
images</li>
<li>it is easy to overwrite tagged container images with newer versions
by mistake.</li>
</ul></section><section><h2 class="section-heading" id="archiving-and-persistently-identifying-container-images-using-zenodo">Archiving and persistently identifying container images using
Zenodo<a class="anchor" aria-label="anchor" href="#archiving-and-persistently-identifying-container-images-using-zenodo"></a>
</h2>
<hr class="half-width">
<p>When you publish your work or make it publicly available in some way
it is good practice to make container images that you used for
computational work available in an immutable, persistent way and to have
an identifier that allows people to cite and give you credit for the
work you have done. <a href="https://zenodo.org/" class="external-link">Zenodo</a> is one
service that provides this functionality.</p>
<p>Zenodo supports the upload of <em>tar</em> archives and we can
capture our Docker container images as tar archives using the
<code>docker image save</code> command. For example, to export the
container image we created earlier in this lesson:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">docker</span> image save alice/alpine-python:v1 <span class="at">-o</span> alpine-python.tar</span></code></pre>
</div>
<p>These tar container images can become quite large and Zenodo supports
uploads up to 50GB so you may need to compress your archive to make it
fit on Zenodo using a tool such as gzip (or zip):</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">gzip</span> alpine-python.tar</span></code></pre>
</div>
<p>Once you have your archive, you can <a href="https://zenodo.org/deposit/" class="external-link">deposit it on Zenodo</a> and this
will:</p>
<ul>
<li>Create a long-term archive snapshot of your Docker container image
which people (including your future self) can download and reuse or
reproduce your work.</li>
<li>Create a persistent DOI (<em>Digital Object Identifier</em>) that
you can cite in any publications or outputs to enable reproducibility
and recognition of your work.</li>
</ul>
<p>In addition to the archive file itself, the deposit process will ask
you to provide some basic metadata to classify the container image and
the associated work.</p>
<p>Note that Zenodo is not the only option for archiving and generating
persistent DOIs for container images. There are other services out there
– for example, some organizations may provide their own, equivalent,
service.</p>
</section><section><h2 class="section-heading" id="reproducibility-good-practice">Reproducibility good practice<a class="anchor" aria-label="anchor" href="#reproducibility-good-practice"></a>
</h2>
<hr class="half-width">
<ul>
<li>Make use of container images to capture the computational
environment required for your work.</li>
<li>Decide on the appropriate granularity for the container images you
will use for your computational work – this will be different for each
project/area. Take note of accepted practice from contemporary work in
the same area. What are the right building blocks for individual
container images in your work?</li>
<li>Document what you have done and why – this can be put in comments in
the <code>Dockerfile</code> and the use of the container image described
in associated documentation and/or publications. Make sure that
references are made in both directions so that the container image and
the documentation are appropriately linked.</li>
<li>When you publish work (in whatever way) use an archiving and DOI
service such as Zenodo to make sure your container image is captured as
it was used for the work and that it is assigned a persistent DOI to
allow it to be cited and referenced properly.</li>
<li>Make use of tags when naming your container images, this ensures
that if you update the image in future, previous versions can be
retained within a container repository to be easily accessed, if this is
required.</li>
<li>A built and archived container image can ensure a persistently
bundled set of software and dependecies. However, a
<code>Dockerfile</code> provides a lightweight means of storing a
container definition that can be used to re-create a container image at
a later time. If you’re taking this approach, ensure that you specify
software package and dependency versions within your
<code>Dockerfile</code> rather than just specifying package names which
will generally install the most up-to-date version of a package. This
may be incompatible with other elements of your software stack. Also
note that storing only a <code>Dockerfile</code> presents
reproducibility challenges because required versions of packages may not
be available indefinitely, potentially meaning that you’re unable to
reproduce the required environment and, hence, the research
results.</li>
</ul></section><section><h2 class="section-heading" id="container-granularity">Container Granularity<a class="anchor" aria-label="anchor" href="#container-granularity"></a>
</h2>
<hr class="half-width">
<p>As mentioned above, one of the decisions you may need to make when
containerising your research workflows is what level of
<em>granularity</em> you wish to employ. The two extremes of this
decision could be characterized as:</p>
<ul>
<li>Create a single container image with all the tools you require for
your research or analysis workflow</li>
<li>Create many container images each running a single command (or step)
of the workflow and use them together</li>
</ul>
<p>Of course, many real applications will sit somewhere between these
two extremes.</p>
<div id="positives-and-negatives" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="positives-and-negatives" class="callout-inner">
<h3 class="callout-title">Positives and negatives</h3>
<div class="callout-content">
<p>What are the advantages and disadvantages of the two approaches to
container granularity for research workflows described above? Think
about this and write a few bullet points for advantages and
disadvantages for each approach in the course Etherpad.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>This is not an exhaustive list but some of the advantages and
disadvantages could be:</p>
<div class="section level3">
<h3 id="single-large-container-image">Single large container image<a class="anchor" aria-label="anchor" href="#single-large-container-image"></a>
</h3>
<ul>
<li>Advantages:
<ul>
<li>Simpler to document</li>
<li>Full set of requirements packaged in one place</li>
<li>Potentially easier to maintain (though could be opposite if working
with large, distributed group)</li>
</ul>
</li>
<li>Disadvantages:
<ul>
<li>Could get very large in size, making it more difficult to distribute
<ul>
<li>Could use <a href="https://docs.docker.com/develop/develop-images/multistage-build" class="external-link">Docker
multi-stage build</a> to reduce size</li>
</ul>
</li>
<li>May end up with same dependency issues within the container image
from different software requirements</li>
<li>Potentially more complex to test</li>
<li>Less re-useable for different, but related, work</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="multiple-smaller-container-images">Multiple smaller container images<a class="anchor" aria-label="anchor" href="#multiple-smaller-container-images"></a>
</h3>
<ul>
<li>Advantages:
<ul>
<li>Individual components can be re-used for different, but related,
work</li>
<li>Individual parts are smaller in size making them easier to
distribute</li>
<li>Avoid dependency issues between different pieces of software</li>
<li>Easier to test</li>
</ul>
</li>
<li>Disadvantage:
<ul>
<li>More difficult to document</li>
<li>Potentially more difficult to maintain (though could be easier if
working with large, distributed group)</li>
<li>May end up with dependency issues between component container images
if they get out of sync</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="next-steps-with-containers" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="next-steps-with-containers" class="callout-inner">
<h3 class="callout-title">Next steps with containers</h3>
<div class="callout-content">
<p>Now that we’re at the end of the lesson material, take a moment to
reflect on what you’ve learned, how it applies to you, and what to do
next.</p>
<ol style="list-style-type: decimal">
<li>In your own notes, write down or diagram your understanding of
Docker containers and container images: concepts, commands, and how they
work.</li>
<li>In the workshop’s shared notes document, write down how you think
you might use containers in your daily work. If there’s something you
want to try doing with containers right away, what is a next step after
this workshop to make that happen?</li>
</ol>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Container images allow us to encapsulate the computation (and data)
we have used in our research.</li>
<li>Using a service such as Docker Hub allows us to easily share
computational work we have done.</li>
<li>Using container images along with a DOI service such as Zenodo
allows us to capture our work and enables reproducibility.</li>
</ul>
</div>
</div>
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries-incubator/docker-introduction/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries-incubator/docker-introduction/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries-incubator/docker-introduction/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries-incubator/docker-introduction/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:docker-introduction+admins@lists.carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.9" class="external-link">sandpaper (0.16.9)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.4" class="external-link">varnish (1.0.4)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://preview.carpentries.org/docker-introduction/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://preview.carpentries.org/docker-introduction/aio.html",
  "identifier": "https://preview.carpentries.org/docker-introduction/aio.html",
  "dateCreated": "2024-10-22",
  "dateModified": "2024-10-22",
  "datePublished": "2024-10-22"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

